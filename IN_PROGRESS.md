# In Progress - Release 0.1a

## Currently Active Items

### 1. Refactor Page JavaScript
**Priority:** High  
**Description:** Move inline JavaScript from templates to separate .js files for better code organization and maintainability.

**Current Status:** Navigation, authentication, and notification systems have been successfully refactored with proper separation of concerns. JavaScript file structure has been optimized and consolidated. Fixed the navbar authentication display issue using a reactive component-based approach: authentication component maintains global state (`window.lotroAuth`) and dispatches custom events (`auth-state-changed`) when state changes; navigation component listens for these events and updates its reactive properties accordingly. The auth-section template uses clean, no-inline-JS references to navigation component properties. Authentication section properly shows logged-in user dropdown when authenticated and Sign-In button when not authenticated. Reorganized release notes access by removing from main navigation and adding to home page and footer with version number link. Created centralized icon system using Jinja2 macros to replace inline SVG paths with readable icon references (e.g., `{{ icon("user") }}`). **COMPLETED:** User management consolidation - merged admin and account directories into unified `users` directory structure; extracted all inline JavaScript from account.html and admin.html into separate component files (`account-management.js`, `admin-panel.js`); replaced all SVG icons with centralized icon imports; updated all color schemes to use centralized LOTRO color definitions; updated routing to point to new template locations. **COMPLETED:** Authentication system consolidation - unified authentication verification into a single middleware-based system; eliminated duplicate authentication logic between API and web routes; created shared authentication utilities (`auth_utils.py`) for consistent session validation and activity tracking; implemented 6-hour throttled `last_login` updates for accurate user activity monitoring; simplified route handlers by removing authentication checks and using request state for user access; admin panel now shows accurate "Last Login" data reflecting actual user activity rather than just explicit logins. **COMPLETED:** Database pages refactoring - successfully extracted all inline JavaScript from database templates into properly organized component files; implemented streamlined base-panel.js containing only shared functionality needed by all database panels (reduced from 198 to 55 lines); created component-based script loading where each panel template includes its own dependencies; established clean separation between equipment and essences panels with their own filter configurations; completed major item model refactoring by splitting monolithic `item.py` (507 lines) into focused single-class files in `items/` subdirectory (ItemQuality, ItemStat, Item, EquipmentItem, Weapon, Essence); updated all 11 import references across the codebase; maintained all polymorphic functionality and API compatibility.

**Next Steps:** Complete the frontend JavaScript refactoring by addressing the builder page, which is the final remaining area requiring inline JavaScript extraction and component organization.

---

**Note:** When moving items here from TODO.md, update the description to include current status and next steps. 