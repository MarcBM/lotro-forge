{% extends "base/base.html" %}
{% from "components/icons.html" import icon %}

{% block title %}Builder - LotRO Forge{% endblock %}

{% block content %}
<div class="w-full h-[calc(100vh-12rem)] -mx-6 -my-6 relative" x-data="panelManager()">
    <!-- Builder Component -->
    <div id="builder-component" 
        x-data="buildState"
        class="bg-lotro-darker h-full">
            
        <!-- Utility Panel Component -->
        {% include "builder/utility-panel.html" %}

        <!-- Main content area -->
        <div class="w-full px-[5%] pt-6 pb-4 h-full flex items-start justify-center gap-0 relative" x-data="databaseController()">
            <!-- Main Character Sheet Section -->
            <div class="grid grid-cols-[130px_330px_1fr_460px] gap-0 p-4 items-start">
                <!-- Invisible spacer column to balance layout -->
                <div></div>
                {% include "builder/columns/legendary_items.html" %}
                {% include "builder/columns/character_info.html" %}
                {% include "builder/columns/character_stats.html" %}
            </div>
        </div>
    </div>
</div>

<!-- Hide elements until Alpine.js is ready -->
<style>
    [x-cloak] { display: none !important; }
</style>

<!-- Builder JavaScript -->
<script src="{{ url_for('static', path='js/components/panel-manager.js') }}"></script>
<script src="{{ url_for('static', path='js/database/database-controller.js') }}"></script>
<script src="{{ url_for('static', path='js/builder/build-state.js') }}"></script>
<script src="{{ url_for('static', path='js/builder/models/item.js') }}"></script>
<script src="{{ url_for('static', path='js/builder/models/equipment.js') }}"></script>
<script src="{{ url_for('static', path='js/builder/models/essence.js') }}"></script>
<script src="{{ url_for('static', path='js/builder/models/weapon.js') }}"></script>
<script src="{{ url_for('static', path='js/builder/equipment-manager.js') }}"></script>
<script src="{{ url_for('static', path='js/builder/essence-manager.js') }}"></script>
<script src="{{ url_for('static', path='js/builder/stats-engine.js') }}"></script>
{% endblock %} 